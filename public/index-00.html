<!DOCTYPE html>
<html>
<head>
	<title>Fetch What3Words for a collection of points</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css"
   integrity="sha512-07I2e+7D8p6he1SIM+1twR5TIrhUQn9+I6yjqD53JQjFiMf8EtC93ty0/5vJTZGF8aAocvHYNEDJajGdNx1IsQ=="
   crossorigin=""/>  
  <style>
  /* https://www.mapbox.com/mapbox.js/example/v1.0.0/divicon/ */
  .leaflet-marker-icon {    margin-left:-1px;    margin-top:-4px;    width: 2px;    height: 4px;      }
  .circle-marker {  background: #0000ff; /* color of the circle */  border-radius: 50%; /* make the div a circular shape */  box-shadow: 4px 4px 3px grey; /* see http://www.w3schools.com/css/css3_shadows.asp */  -moz-box-shadow: 4px 4px 3px grey;  -webkit-box-shadow: 4px 4px 3px grey;}
  
  /* remove label background elements */
.leaflet-tooltip.my-labels {
  background-color: transparent;
  border: transparent;
  box-shadow: none;
  font-weight: bold;
  font-size: 20px;
  }
  </style>
  <script src="/w3w.geocoder.min.js" type="text/javascript"></script>
  </head>
<body>
  <p>
    <a href="https://github.com/what3words/w3w-javascript-wrapper">What3Words javascript wrapper</a> test 01 <br>
  <em>(check console log too)</em>
  </p>
  <div id="map" style="width: 100%; height: 600px; border: thin dotted;"></div>
  <script>
    // Fetch What3Words for a collection of points
    var w3w_apikey = "CJD98Y7X"; 
    var points = { "type": "FeatureCollection", 
                  "name": "test-points-short", 
                  "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } }, 
                  "features": [ { "type": "Feature", "geometry": { "type": "Point", "coordinates": [ -135.024939373899997, 60.672798081069011 ] } }, { "type": "Feature", "geometry": { "type": "Point", "coordinates": [ -135.024939373899997, 60.672825032341493 ] } }, { "type": "Feature", "geometry": { "type": "Point", "coordinates": [ -135.024939373899997, 60.672851983614009 ] } }, { "type": "Feature", "geometry": { "type": "Point", "coordinates": [ -135.024939373899997, 60.672878934886 ] } }, { "type": "Feature", "geometry": { "type": "Point", "coordinates": [ -135.024939373899997, 60.672663324709006 ] } }, { "type": "Feature", "geometry": { "type": "Point", "coordinates": [ -135.024939373899997, 60.672690275980997 ] } }, { "type": "Feature", "geometry": { "type": "Point", "coordinates": [ -135.024939373899997, 60.67271722725301 ] } }, { "type": "Feature", "geometry": { "type": "Point", "coordinates": [ -135.024884259259977, 60.672771129797013 ] } }, { "type": "Feature", "geometry": { "type": "Point", "coordinates": [ -135.024884259259977, 60.672798081068997 ] } }, { "type": "Feature", "geometry": { "type": "Point", "coordinates": [ -135.024333112874984, 60.672878934885993 ] } }, { "type": "Feature", "geometry": { "type": "Point", "coordinates": [ -135.024333112874984, 60.672905886157999 ] } }, { "type": "Feature", "geometry": { "type": "Point", "coordinates": [ -135.024333112874984, 60.67293283742999 ] } }, { "type": "Feature", "geometry": { "type": "Point", "coordinates": [ -135.024333112874984, 60.672959788701995 ] } } ] };

    // https://github.com/what3words/w3w-javascript-wrapper
    //var Geocoder = require('w3w-node-wrapper');
    var options = {key: w3w_apikey, format: 'GEOJSON'};
    var w3w = new W3W.Geocoder(options);
    
    var w3w_data = {};                               
    var callback = {
        onSuccess: function(data) {
        // save for later use
        w3w_data[data.properties['words']] = data.geometry['coordinates'];
                  
          // console.log("data:", data);
          console.log(//"data parsed 'words', 'geometry':\n", 
                      data.properties['words'],
                      '('+ String(data.geometry['coordinates']) + ')'
                     );
          // console.log("data in json:", JSON.stringify(data));
                  
        return w3w_data
        },
        onFailure: function(data) {
            console.log(JSON.stringify(data));
        }
    };

    // single point lookup request
    var latlng = [60.672923,-135.024628];
    var params = {
        coords: latlng
    };
    w3w.reverse(params, callback);
    
    // Fetch w3w words for each point
    i = 0;
    for (var prop in points.features) {
      var yx = points.features[i].geometry['coordinates']; // the coords come in as Longitude, Latitude
      // console.log(yx);
      params = {coords: [yx[1],yx[0]]}; // give w3w coords as  Lat,Long
      w3w.reverse(params, callback);
      i++;
    }
    console.log(w3w_data);
  </script>
 
  <script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"
   integrity="sha512-A7vV8IFfih/D732iSSKi20u/ooOfj/AGehOKq0f4vLT1Zr2Y+RX7C+w8A1gaSasGtRUZpF/NZgzSAu4/Gc41Lg=="
   crossorigin=""></script>
  
<script>
    // Build the map
    // your Mapbox API token
    var mb_token = 'pk.eyJ1IjoibWFwaGV3IiwiYSI6ImNqNGE0bHljNzEwNHQzMnA3cmFkMnZpMXkifQ.nRZ79Ob2sd6nLu-cVHPiLA'
		
    var places = new L.LayerGroup();
		//L.marker([60.672923, -135.024628]).bindPopup('Schwatka Lake - east boat ramp').addTo(places);    

		var mbAttr = 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +		'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +		'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
		mbUrl = 'https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=' + mb_token,
    satUrl = 'https://api.mapbox.com/styles/v1/mapbox/satellite-streets-v9/tiles/256/{z}/{x}/{y}?access_token=' + mb_token;

    var Esri_WorldImagery = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
	    attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'
      });    
    
		var grayscale   = L.tileLayer(mbUrl, {id: 'mapbox.light', attribution: mbAttr, maxZoom: 22}),
		streets  = L.tileLayer(mbUrl, {id: 'mapbox.streets',   attribution: mbAttr, maxZoom: 22}),
    satellite  = L.tileLayer(satUrl, {id: 'mapbox.satellite-streets',   attribution: mbAttr, maxZoom: 22});

		var map = L.map('map', {
			center: [60.672923, -135.024628],
			zoom: 21,
			layers: [satellite, places]
		});

		// // on click show w3w location
		// var w = new L.Control.w3w();
		// w.addTo(map);
		// map.on('click', function(e) {
		// 	console.log(e);
		// 	w.setCoordinates(e);
		// });
    
    // // on 2x-click show w3w grid
    // // https://stackoverflow.com/questions/15406537/disable-map-zoom-on-circlemarker-double-click-in-leaflet#15407349
    // map.doubleClickZoom.disable(); 
    // map.on("dblclick", function (e) {
    // //my dblclick stuff
    //   console.log(e);
    // });
    
		var baseLayers = {
			"Grayscale": grayscale,
			"Streets": streets,
      "Satellite": satellite
		};
    
		var overlays = {
			"Places": places
		};

    // https://gis.stackexchange.com/questions/226806/leaflet-circlemarker-with-shadow
    var div_circle = L.divIcon({ className: 'circle-marker'});  
    var marker = L.marker([60.672923, -135.024628], {icon: div_circle} ).addTo(map);
    
    // https://geospatialresponse.wordpress.com/2015/07/26/leaflet-geojson-pointtolayer/
    var pointLayer = L.geoJSON(null, {
      pointToLayer: function(feature,latlng){
        //return L.divIcon({className: 'circle-marker'});
        // https://gis.stackexchange.com/questions/235050/leaflet-geojson-bindtooltip-from-feature-attribute
        label = String(feature.properties.name) // .bindTooltip can't use straight 'feature.properties.attribute'
        return new L.CircleMarker(latlng, {
                                  radius: 0.1,
                                  }).bindTooltip(label, {permanent: true, 
                                                         direction: 'center',
                                                        className: 'my-lables'}).openTooltip();
      }
    });
    pointLayer.addData(points);
    map.addLayer(pointLayer);
    
		L.control.layers(baseLayers, overlays).addTo(map);
  
  // https://stackoverflow.com/questions/27792361/best-method-to-label-polygon-in-leaflet
  var districts = L.geoJson(null, {
      style: function (feature) {
        return {
            weight: 1,
            opacity: 1,
            color: 'blueviolet',
            fillColor: 'plum',
            fillOpacity: 0.5
          };
        },

    // onEachFeature: function (feature, layer) {
    //     layer.on('mouseover', function () {
    //       this.setStyle({
    //         'fillColor': '#0000ff'
    //       });
    //     });
    //     layer.on('mouseout', function () {
    //       this.setStyle({
    //         'fillColor': 'plum'
    //       });
    //     });
    //     layer.on('click', function () {
    //     window.location = feature.properties.URL;
    //     });

      onEachFeature: function (feature, layer) {
        layer.bindTooltip(feature.properties['name'], { permanent: true, 'noHide': true });
      }
  });    
  
  // $.getJSON("public/test-poly-short-named.geojson", function (data) {
  //   console.log(data);
  //   districts.addData(data);
  //   });

  var data_poly = {
        "type": "FeatureCollection",
        "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
        "features": [
        { "type": "Feature", "properties": { "name": "some thing" }, "geometry": { "type": "Polygon", "coordinates": [ [ [ -135.02392949701658, 60.672799645413662 ], [ -135.02392949701658, 60.672796516724361 ], [ -135.02397844050029, 60.672487499729989 ], [ -135.02397940731845, 60.67248452416964 ], [ -135.02412144684038, 60.672205755911719 ], [ -135.02412328583782, 60.672203224748905 ], [ -135.02434451757989, 60.671981993006824 ], [ -135.0243470487427, 60.671980154009397 ], [ -135.02462581700061, 60.671838114487478 ], [ -135.02462879256097, 60.671837147669315 ], [ -135.02493780955535, 60.67178820418561 ], [ -135.02494093824464, 60.67178820418561 ], [ -135.02524995523902, 60.671837147669315 ], [ -135.02525293079938, 60.671838114487478 ], [ -135.0255316990573, 60.671980154009397 ], [ -135.0255342302201, 60.671981993006824 ], [ -135.02575546196218, 60.672203224748905 ], [ -135.02575730095961, 60.672205755911719 ], [ -135.02589934048154, 60.67248452416964 ], [ -135.02590030729971, 60.672487499729989 ], [ -135.02594925078341, 60.672796516724361 ], [ -135.02594925078341, 60.672799645413662 ], [ -135.02590030729971, 60.673108662408033 ], [ -135.02589934048154, 60.673111637968383 ], [ -135.02575730095961, 60.673390406226304 ], [ -135.02575546196218, 60.673392937389117 ], [ -135.0255342302201, 60.673614169131199 ], [ -135.0255316990573, 60.673616008128626 ], [ -135.02525293079938, 60.673758047650544 ], [ -135.02524995523902, 60.673759014468708 ], [ -135.02494093824464, 60.673807957952413 ], [ -135.02493780955535, 60.673807957952413 ], [ -135.02462879256097, 60.673759014468708 ], [ -135.02462581700061, 60.673758047650544 ], [ -135.0243470487427, 60.673616008128626 ], [ -135.02434451757989, 60.673614169131199 ], [ -135.02412328583782, 60.673392937389117 ], [ -135.02412144684038, 60.673390406226304 ], [ -135.02397940731845, 60.673111637968383 ], [ -135.02397844050029, 60.673108662408033 ], [ -135.02392949701658, 60.672799645413662 ] ] ] } },
        { "type": "Feature", "properties": { "name": "some thing" }, "geometry": { "type": "Polygon", "coordinates": [ [ [ -135.02392949701658, 60.672826596686143 ], [ -135.02392949701658, 60.672823467996842 ], [ -135.02397844050029, 60.672514451002471 ], [ -135.02397940731845, 60.672511475442121 ], [ -135.02412144684038, 60.6722327071842 ], [ -135.02412328583782, 60.672230176021387 ], [ -135.02434451757989, 60.672008944279305 ], [ -135.0243470487427, 60.672007105281878 ], [ -135.02462581700061, 60.67186506575996 ], [ -135.02462879256097, 60.671864098941796 ], [ -135.02493780955535, 60.671815155458091 ], [ -135.02494093824464, 60.671815155458091 ], [ -135.02524995523902, 60.671864098941796 ], [ -135.02525293079938, 60.67186506575996 ], [ -135.0255316990573, 60.672007105281878 ], [ -135.0255342302201, 60.672008944279305 ], [ -135.02575546196218, 60.672230176021387 ], [ -135.02575730095961, 60.6722327071842 ], [ -135.02589934048154, 60.672511475442121 ], [ -135.02590030729971, 60.672514451002471 ], [ -135.02594925078341, 60.672823467996842 ], [ -135.02594925078341, 60.672826596686143 ], [ -135.02590030729971, 60.673135613680515 ], [ -135.02589934048154, 60.673138589240864 ], [ -135.02575730095961, 60.673417357498785 ], [ -135.02575546196218, 60.673419888661599 ], [ -135.0255342302201, 60.67364112040368 ], [ -135.0255316990573, 60.673642959401107 ], [ -135.02525293079938, 60.673784998923026 ], [ -135.02524995523902, 60.673785965741189 ], [ -135.02494093824464, 60.673834909224894 ], [ -135.02493780955535, 60.673834909224894 ], [ -135.02462879256097, 60.673785965741189 ], [ -135.02462581700061, 60.673784998923026 ], [ -135.0243470487427, 60.673642959401107 ], [ -135.02434451757989, 60.67364112040368 ], [ -135.02412328583782, 60.673419888661599 ], [ -135.02412144684038, 60.673417357498785 ], [ -135.02397940731845, 60.673138589240864 ], [ -135.02397844050029, 60.673135613680515 ], [ -135.02392949701658, 60.672826596686143 ] ] ] } },
        { "type": "Feature", "properties": { "name": "some thing" }, "geometry": { "type": "Polygon", "coordinates": [ [ [ -135.02392949701658, 60.67285354795866 ], [ -135.02392949701658, 60.672850419269359 ], [ -135.02397844050029, 60.672541402274987 ], [ -135.02397940731845, 60.672538426714638 ], [ -135.02412144684038, 60.672259658456717 ], [ -135.02412328583782, 60.672257127293904 ], [ -135.02434451757989, 60.672035895551822 ], [ -135.0243470487427, 60.672034056554395 ], [ -135.02462581700061, 60.671892017032476 ], [ -135.02462879256097, 60.671891050214313 ], [ -135.02493780955535, 60.671842106730608 ], [ -135.02494093824464, 60.671842106730608 ], [ -135.02524995523902, 60.671891050214313 ], [ -135.02525293079938, 60.671892017032476 ], [ -135.0255316990573, 60.672034056554395 ], [ -135.0255342302201, 60.672035895551822 ], [ -135.02575546196218, 60.672257127293904 ], [ -135.02575730095961, 60.672259658456717 ], [ -135.02589934048154, 60.672538426714638 ], [ -135.02590030729971, 60.672541402274987 ], [ -135.02594925078341, 60.672850419269359 ], [ -135.02594925078341, 60.67285354795866 ], [ -135.02590030729971, 60.673162564953032 ], [ -135.02589934048154, 60.673165540513381 ], [ -135.02575730095961, 60.673444308771302 ], [ -135.02575546196218, 60.673446839934115 ], [ -135.0255342302201, 60.673668071676197 ], [ -135.0255316990573, 60.673669910673624 ], [ -135.02525293079938, 60.673811950195542 ], [ -135.02524995523902, 60.673812917013706 ], [ -135.02494093824464, 60.673861860497411 ], [ -135.02493780955535, 60.673861860497411 ], [ -135.02462879256097, 60.673812917013706 ], [ -135.02462581700061, 60.673811950195542 ], [ -135.0243470487427, 60.673669910673624 ], [ -135.02434451757989, 60.673668071676197 ], [ -135.02412328583782, 60.673446839934115 ], [ -135.02412144684038, 60.673444308771302 ], [ -135.02397940731845, 60.673165540513381 ], [ -135.02397844050029, 60.673162564953032 ], [ -135.02392949701658, 60.67285354795866 ] ] ] } },
        { "type": "Feature", "properties": { "name": "some thing" }, "geometry": { "type": "Polygon", "coordinates": [ [ [ -135.02392949701658, 60.672880499230651 ], [ -135.02392949701658, 60.67287737054135 ], [ -135.02397844050029, 60.672568353546978 ], [ -135.02397940731845, 60.672565377986629 ], [ -135.02412144684038, 60.672286609728708 ], [ -135.02412328583782, 60.672284078565895 ], [ -135.02434451757989, 60.672062846823813 ], [ -135.0243470487427, 60.672061007826386 ], [ -135.02462581700061, 60.671918968304468 ], [ -135.02462879256097, 60.671918001486304 ], [ -135.02493780955535, 60.671869058002599 ], [ -135.02494093824464, 60.671869058002599 ], [ -135.02524995523902, 60.671918001486304 ], [ -135.02525293079938, 60.671918968304468 ], [ -135.0255316990573, 60.672061007826386 ], [ -135.0255342302201, 60.672062846823813 ], [ -135.02575546196218, 60.672284078565895 ], [ -135.02575730095961, 60.672286609728708 ], [ -135.02589934048154, 60.672565377986629 ], [ -135.02590030729971, 60.672568353546978 ], [ -135.02594925078341, 60.67287737054135 ], [ -135.02594925078341, 60.672880499230651 ], [ -135.02590030729971, 60.673189516225023 ], [ -135.02589934048154, 60.673192491785372 ], [ -135.02575730095961, 60.673471260043293 ], [ -135.02575546196218, 60.673473791206106 ], [ -135.0255342302201, 60.673695022948188 ], [ -135.0255316990573, 60.673696861945615 ], [ -135.02525293079938, 60.673838901467533 ], [ -135.02524995523902, 60.673839868285697 ], [ -135.02494093824464, 60.673888811769402 ], [ -135.02493780955535, 60.673888811769402 ], [ -135.02462879256097, 60.673839868285697 ], [ -135.02462581700061, 60.673838901467533 ], [ -135.0243470487427, 60.673696861945615 ], [ -135.02434451757989, 60.673695022948188 ], [ -135.02412328583782, 60.673473791206106 ], [ -135.02412144684038, 60.673471260043293 ], [ -135.02397940731845, 60.673192491785372 ], [ -135.02397844050029, 60.673189516225023 ], [ -135.02392949701658, 60.672880499230651 ] ] ] } },
        { "type": "Feature", "properties": { "name": "some thing" }, "geometry": { "type": "Polygon", "coordinates": [ [ [ -135.02392949701658, 60.672664889053657 ], [ -135.02392949701658, 60.672661760364356 ], [ -135.02397844050029, 60.672352743369984 ], [ -135.02397940731845, 60.672349767809635 ], [ -135.02412144684038, 60.672070999551714 ], [ -135.02412328583782, 60.6720684683889 ], [ -135.02434451757989, 60.671847236646819 ], [ -135.0243470487427, 60.671845397649392 ], [ -135.02462581700061, 60.671703358127473 ], [ -135.02462879256097, 60.67170239130931 ], [ -135.02493780955535, 60.671653447825605 ], [ -135.02494093824464, 60.671653447825605 ], [ -135.02524995523902, 60.67170239130931 ], [ -135.02525293079938, 60.671703358127473 ], [ -135.0255316990573, 60.671845397649392 ], [ -135.0255342302201, 60.671847236646819 ], [ -135.02575546196218, 60.6720684683889 ], [ -135.02575730095961, 60.672070999551714 ], [ -135.02589934048154, 60.672349767809635 ], [ -135.02590030729971, 60.672352743369984 ], [ -135.02594925078341, 60.672661760364356 ], [ -135.02594925078341, 60.672664889053657 ], [ -135.02590030729971, 60.672973906048028 ], [ -135.02589934048154, 60.672976881608378 ], [ -135.02575730095961, 60.673255649866299 ], [ -135.02575546196218, 60.673258181029112 ], [ -135.0255342302201, 60.673479412771194 ], [ -135.0255316990573, 60.673481251768621 ], [ -135.02525293079938, 60.673623291290539 ], [ -135.02524995523902, 60.673624258108703 ], [ -135.02494093824464, 60.673673201592408 ], [ -135.02493780955535, 60.673673201592408 ], [ -135.02462879256097, 60.673624258108703 ], [ -135.02462581700061, 60.673623291290539 ], [ -135.0243470487427, 60.673481251768621 ], [ -135.02434451757989, 60.673479412771194 ], [ -135.02412328583782, 60.673258181029112 ], [ -135.02412144684038, 60.673255649866299 ], [ -135.02397940731845, 60.672976881608378 ], [ -135.02397844050029, 60.672973906048028 ], [ -135.02392949701658, 60.672664889053657 ] ] ] } },
        { "type": "Feature", "properties": { "name": "some thing" }, "geometry": { "type": "Polygon", "coordinates": [ [ [ -135.02392949701658, 60.672691840325648 ], [ -135.02392949701658, 60.672688711636347 ], [ -135.02397844050029, 60.672379694641975 ], [ -135.02397940731845, 60.672376719081626 ], [ -135.02412144684038, 60.672097950823705 ], [ -135.02412328583782, 60.672095419660891 ], [ -135.02434451757989, 60.67187418791881 ], [ -135.0243470487427, 60.671872348921383 ], [ -135.02462581700061, 60.671730309399464 ], [ -135.02462879256097, 60.671729342581301 ], [ -135.02493780955535, 60.671680399097596 ], [ -135.02494093824464, 60.671680399097596 ], [ -135.02524995523902, 60.671729342581301 ], [ -135.02525293079938, 60.671730309399464 ], [ -135.0255316990573, 60.671872348921383 ], [ -135.0255342302201, 60.67187418791881 ], [ -135.02575546196218, 60.672095419660891 ], [ -135.02575730095961, 60.672097950823705 ], [ -135.02589934048154, 60.672376719081626 ], [ -135.02590030729971, 60.672379694641975 ], [ -135.02594925078341, 60.672688711636347 ], [ -135.02594925078341, 60.672691840325648 ], [ -135.02590030729971, 60.673000857320019 ], [ -135.02589934048154, 60.673003832880369 ], [ -135.02575730095961, 60.67328260113829 ], [ -135.02575546196218, 60.673285132301103 ], [ -135.0255342302201, 60.673506364043185 ], [ -135.0255316990573, 60.673508203040612 ], [ -135.02525293079938, 60.67365024256253 ], [ -135.02524995523902, 60.673651209380694 ], [ -135.02494093824464, 60.673700152864399 ], [ -135.02493780955535, 60.673700152864399 ], [ -135.02462879256097, 60.673651209380694 ], [ -135.02462581700061, 60.67365024256253 ], [ -135.0243470487427, 60.673508203040612 ], [ -135.02434451757989, 60.673506364043185 ], [ -135.02412328583782, 60.673285132301103 ], [ -135.02412144684038, 60.67328260113829 ], [ -135.02397940731845, 60.673003832880369 ], [ -135.02397844050029, 60.673000857320019 ], [ -135.02392949701658, 60.672691840325648 ] ] ] } },
        { "type": "Feature", "properties": { "name": "some thing" }, "geometry": { "type": "Polygon", "coordinates": [ [ [ -135.02392949701658, 60.67271879159766 ], [ -135.02392949701658, 60.672715662908359 ], [ -135.02397844050029, 60.672406645913988 ], [ -135.02397940731845, 60.672403670353638 ], [ -135.02412144684038, 60.672124902095717 ], [ -135.02412328583782, 60.672122370932904 ], [ -135.02434451757989, 60.671901139190823 ], [ -135.0243470487427, 60.671899300193395 ], [ -135.02462581700061, 60.671757260671477 ], [ -135.02462879256097, 60.671756293853313 ], [ -135.02493780955535, 60.671707350369608 ], [ -135.02494093824464, 60.671707350369608 ], [ -135.02524995523902, 60.671756293853313 ], [ -135.02525293079938, 60.671757260671477 ], [ -135.0255316990573, 60.671899300193395 ], [ -135.0255342302201, 60.671901139190823 ], [ -135.02575546196218, 60.672122370932904 ], [ -135.02575730095961, 60.672124902095717 ], [ -135.02589934048154, 60.672403670353638 ], [ -135.02590030729971, 60.672406645913988 ], [ -135.02594925078341, 60.672715662908359 ], [ -135.02594925078341, 60.67271879159766 ], [ -135.02590030729971, 60.673027808592032 ], [ -135.02589934048154, 60.673030784152381 ], [ -135.02575730095961, 60.673309552410302 ], [ -135.02575546196218, 60.673312083573116 ], [ -135.0255342302201, 60.673533315315197 ], [ -135.0255316990573, 60.673535154312624 ], [ -135.02525293079938, 60.673677193834543 ], [ -135.02524995523902, 60.673678160652706 ], [ -135.02494093824464, 60.673727104136411 ], [ -135.02493780955535, 60.673727104136411 ], [ -135.02462879256097, 60.673678160652706 ], [ -135.02462581700061, 60.673677193834543 ], [ -135.0243470487427, 60.673535154312624 ], [ -135.02434451757989, 60.673533315315197 ], [ -135.02412328583782, 60.673312083573116 ], [ -135.02412144684038, 60.673309552410302 ], [ -135.02397940731845, 60.673030784152381 ], [ -135.02397844050029, 60.673027808592032 ], [ -135.02392949701658, 60.67271879159766 ] ] ] } },
        { "type": "Feature", "properties": { "name": "some thing" }, "geometry": { "type": "Polygon", "coordinates": [ [ [ -135.02387438237656, 60.672772694141663 ], [ -135.02387438237656, 60.672769565452363 ], [ -135.02392332586027, 60.672460548457991 ], [ -135.02392429267843, 60.672457572897642 ], [ -135.02406633220036, 60.672178804639721 ], [ -135.0240681711978, 60.672176273476907 ], [ -135.02428940293987, 60.671955041734826 ], [ -135.02429193410268, 60.671953202737399 ], [ -135.02457070236059, 60.67181116321548 ], [ -135.02457367792096, 60.671810196397317 ], [ -135.02488269491533, 60.671761252913612 ], [ -135.02488582360462, 60.671761252913612 ], [ -135.025194840599, 60.671810196397317 ], [ -135.02519781615936, 60.67181116321548 ], [ -135.02547658441728, 60.671953202737399 ], [ -135.02547911558008, 60.671955041734826 ], [ -135.02570034732216, 60.672176273476907 ], [ -135.02570218631959, 60.672178804639721 ], [ -135.02584422584152, 60.672457572897642 ], [ -135.02584519265969, 60.672460548457991 ], [ -135.02589413614339, 60.672769565452363 ], [ -135.02589413614339, 60.672772694141663 ], [ -135.02584519265969, 60.673081711136035 ], [ -135.02584422584152, 60.673084686696384 ], [ -135.02570218631959, 60.673363454954305 ], [ -135.02570034732216, 60.673365986117119 ], [ -135.02547911558008, 60.6735872178592 ], [ -135.02547658441728, 60.673589056856628 ], [ -135.02519781615936, 60.673731096378546 ], [ -135.025194840599, 60.673732063196709 ], [ -135.02488582360462, 60.673781006680414 ], [ -135.02488269491533, 60.673781006680414 ], [ -135.02457367792096, 60.673732063196709 ], [ -135.02457070236059, 60.673731096378546 ], [ -135.02429193410268, 60.673589056856628 ], [ -135.02428940293987, 60.6735872178592 ], [ -135.0240681711978, 60.673365986117119 ], [ -135.02406633220036, 60.673363454954305 ], [ -135.02392429267843, 60.673084686696384 ], [ -135.02392332586027, 60.673081711136035 ], [ -135.02387438237656, 60.672772694141663 ] ] ] } },
        { "type": "Feature", "properties": { "name": "some thing" }, "geometry": { "type": "Polygon", "coordinates": [ [ [ -135.02387438237656, 60.672799645413647 ], [ -135.02387438237656, 60.672796516724347 ], [ -135.02392332586027, 60.672487499729975 ], [ -135.02392429267843, 60.672484524169626 ], [ -135.02406633220036, 60.672205755911705 ], [ -135.0240681711978, 60.672203224748891 ], [ -135.02428940293987, 60.67198199300681 ], [ -135.02429193410268, 60.671980154009383 ], [ -135.02457070236059, 60.671838114487464 ], [ -135.02457367792096, 60.671837147669301 ], [ -135.02488269491533, 60.671788204185596 ], [ -135.02488582360462, 60.671788204185596 ], [ -135.025194840599, 60.671837147669301 ], [ -135.02519781615936, 60.671838114487464 ], [ -135.02547658441728, 60.671980154009383 ], [ -135.02547911558008, 60.67198199300681 ], [ -135.02570034732216, 60.672203224748891 ], [ -135.02570218631959, 60.672205755911705 ], [ -135.02584422584152, 60.672484524169626 ], [ -135.02584519265969, 60.672487499729975 ], [ -135.02589413614339, 60.672796516724347 ], [ -135.02589413614339, 60.672799645413647 ], [ -135.02584519265969, 60.673108662408019 ], [ -135.02584422584152, 60.673111637968368 ], [ -135.02570218631959, 60.673390406226289 ], [ -135.02570034732216, 60.673392937389103 ], [ -135.02547911558008, 60.673614169131184 ], [ -135.02547658441728, 60.673616008128612 ], [ -135.02519781615936, 60.67375804765053 ], [ -135.025194840599, 60.673759014468693 ], [ -135.02488582360462, 60.673807957952398 ], [ -135.02488269491533, 60.673807957952398 ], [ -135.02457367792096, 60.673759014468693 ], [ -135.02457070236059, 60.67375804765053 ], [ -135.02429193410268, 60.673616008128612 ], [ -135.02428940293987, 60.673614169131184 ], [ -135.0240681711978, 60.673392937389103 ], [ -135.02406633220036, 60.673390406226289 ], [ -135.02392429267843, 60.673111637968368 ], [ -135.02392332586027, 60.673108662408019 ], [ -135.02387438237656, 60.672799645413647 ] ] ] } },
        { "type": "Feature", "properties": { "name": "some thing" }, "geometry": { "type": "Polygon", "coordinates": [ [ [ -135.02332323599157, 60.672880499230644 ], [ -135.02332323599157, 60.672877370541343 ], [ -135.02337217947527, 60.672568353546971 ], [ -135.02337314629344, 60.672565377986622 ], [ -135.02351518581537, 60.672286609728701 ], [ -135.0235170248128, 60.672284078565887 ], [ -135.02373825655488, 60.672062846823806 ], [ -135.02374078771768, 60.672061007826379 ], [ -135.0240195559756, 60.67191896830446 ], [ -135.02402253153596, 60.671918001486297 ], [ -135.02433154853034, 60.671869058002592 ], [ -135.02433467721963, 60.671869058002592 ], [ -135.02464369421401, 60.671918001486297 ], [ -135.02464666977437, 60.67191896830446 ], [ -135.02492543803228, 60.672061007826379 ], [ -135.02492796919509, 60.672062846823806 ], [ -135.02514920093716, 60.672284078565887 ], [ -135.0251510399346, 60.672286609728701 ], [ -135.02529307945653, 60.672565377986622 ], [ -135.02529404627469, 60.672568353546971 ], [ -135.0253429897584, 60.672877370541343 ], [ -135.0253429897584, 60.672880499230644 ], [ -135.02529404627469, 60.673189516225015 ], [ -135.02529307945653, 60.673192491785365 ], [ -135.0251510399346, 60.673471260043286 ], [ -135.02514920093716, 60.673473791206099 ], [ -135.02492796919509, 60.673695022948181 ], [ -135.02492543803228, 60.673696861945608 ], [ -135.02464666977437, 60.673838901467526 ], [ -135.02464369421401, 60.67383986828569 ], [ -135.02433467721963, 60.673888811769395 ], [ -135.02433154853034, 60.673888811769395 ], [ -135.02402253153596, 60.67383986828569 ], [ -135.0240195559756, 60.673838901467526 ], [ -135.02374078771768, 60.673696861945608 ], [ -135.02373825655488, 60.673695022948181 ], [ -135.0235170248128, 60.673473791206099 ], [ -135.02351518581537, 60.673471260043286 ], [ -135.02337314629344, 60.673192491785365 ], [ -135.02337217947527, 60.673189516225015 ], [ -135.02332323599157, 60.672880499230644 ] ] ] } },
        { "type": "Feature", "properties": { "name": "some thing" }, "geometry": { "type": "Polygon", "coordinates": [ [ [ -135.02332323599157, 60.672907450502649 ], [ -135.02332323599157, 60.672904321813348 ], [ -135.02337217947527, 60.672595304818977 ], [ -135.02337314629344, 60.672592329258627 ], [ -135.02351518581537, 60.672313561000706 ], [ -135.0235170248128, 60.672311029837893 ], [ -135.02373825655488, 60.672089798095811 ], [ -135.02374078771768, 60.672087959098384 ], [ -135.0240195559756, 60.671945919576466 ], [ -135.02402253153596, 60.671944952758302 ], [ -135.02433154853034, 60.671896009274597 ], [ -135.02433467721963, 60.671896009274597 ], [ -135.02464369421401, 60.671944952758302 ], [ -135.02464666977437, 60.671945919576466 ], [ -135.02492543803228, 60.672087959098384 ], [ -135.02492796919509, 60.672089798095811 ], [ -135.02514920093716, 60.672311029837893 ], [ -135.0251510399346, 60.672313561000706 ], [ -135.02529307945653, 60.672592329258627 ], [ -135.02529404627469, 60.672595304818977 ], [ -135.0253429897584, 60.672904321813348 ], [ -135.0253429897584, 60.672907450502649 ], [ -135.02529404627469, 60.673216467497021 ], [ -135.02529307945653, 60.67321944305737 ], [ -135.0251510399346, 60.673498211315291 ], [ -135.02514920093716, 60.673500742478105 ], [ -135.02492796919509, 60.673721974220186 ], [ -135.02492543803228, 60.673723813217613 ], [ -135.02464666977437, 60.673865852739532 ], [ -135.02464369421401, 60.673866819557695 ], [ -135.02433467721963, 60.6739157630414 ], [ -135.02433154853034, 60.6739157630414 ], [ -135.02402253153596, 60.673866819557695 ], [ -135.0240195559756, 60.673865852739532 ], [ -135.02374078771768, 60.673723813217613 ], [ -135.02373825655488, 60.673721974220186 ], [ -135.0235170248128, 60.673500742478105 ], [ -135.02351518581537, 60.673498211315291 ], [ -135.02337314629344, 60.67321944305737 ], [ -135.02337217947527, 60.673216467497021 ], [ -135.02332323599157, 60.672907450502649 ] ] ] } },
        { "type": "Feature", "properties": { "name": "some thing" }, "geometry": { "type": "Polygon", "coordinates": [ [ [ -135.02332323599157, 60.67293440177464 ], [ -135.02332323599157, 60.672931273085339 ], [ -135.02337217947527, 60.672622256090968 ], [ -135.02337314629344, 60.672619280530618 ], [ -135.02351518581537, 60.672340512272697 ], [ -135.0235170248128, 60.672337981109884 ], [ -135.02373825655488, 60.672116749367802 ], [ -135.02374078771768, 60.672114910370375 ], [ -135.0240195559756, 60.671972870848457 ], [ -135.02402253153596, 60.671971904030293 ], [ -135.02433154853034, 60.671922960546588 ], [ -135.02433467721963, 60.671922960546588 ], [ -135.02464369421401, 60.671971904030293 ], [ -135.02464666977437, 60.671972870848457 ], [ -135.02492543803228, 60.672114910370375 ], [ -135.02492796919509, 60.672116749367802 ], [ -135.02514920093716, 60.672337981109884 ], [ -135.0251510399346, 60.672340512272697 ], [ -135.02529307945653, 60.672619280530618 ], [ -135.02529404627469, 60.672622256090968 ], [ -135.0253429897584, 60.672931273085339 ], [ -135.0253429897584, 60.67293440177464 ], [ -135.02529404627469, 60.673243418769012 ], [ -135.02529307945653, 60.673246394329361 ], [ -135.0251510399346, 60.673525162587282 ], [ -135.02514920093716, 60.673527693750096 ], [ -135.02492796919509, 60.673748925492177 ], [ -135.02492543803228, 60.673750764489604 ], [ -135.02464666977437, 60.673892804011523 ], [ -135.02464369421401, 60.673893770829686 ], [ -135.02433467721963, 60.673942714313391 ], [ -135.02433154853034, 60.673942714313391 ], [ -135.02402253153596, 60.673893770829686 ], [ -135.0240195559756, 60.673892804011523 ], [ -135.02374078771768, 60.673750764489604 ], [ -135.02373825655488, 60.673748925492177 ], [ -135.0235170248128, 60.673527693750096 ], [ -135.02351518581537, 60.673525162587282 ], [ -135.02337314629344, 60.673246394329361 ], [ -135.02337217947527, 60.673243418769012 ], [ -135.02332323599157, 60.67293440177464 ] ] ] } },
        { "type": "Feature", "properties": { "name": "some thing" }, "geometry": { "type": "Polygon", "coordinates": [ [ [ -135.02332323599157, 60.672961353046645 ], [ -135.02332323599157, 60.672958224357345 ], [ -135.02337217947527, 60.672649207362973 ], [ -135.02337314629344, 60.672646231802624 ], [ -135.02351518581537, 60.672367463544703 ], [ -135.0235170248128, 60.672364932381889 ], [ -135.02373825655488, 60.672143700639808 ], [ -135.02374078771768, 60.67214186164238 ], [ -135.0240195559756, 60.671999822120462 ], [ -135.02402253153596, 60.671998855302299 ], [ -135.02433154853034, 60.671949911818594 ], [ -135.02433467721963, 60.671949911818594 ], [ -135.02464369421401, 60.671998855302299 ], [ -135.02464666977437, 60.671999822120462 ], [ -135.02492543803228, 60.67214186164238 ], [ -135.02492796919509, 60.672143700639808 ], [ -135.02514920093716, 60.672364932381889 ], [ -135.0251510399346, 60.672367463544703 ], [ -135.02529307945653, 60.672646231802624 ], [ -135.02529404627469, 60.672649207362973 ], [ -135.0253429897584, 60.672958224357345 ], [ -135.0253429897584, 60.672961353046645 ], [ -135.02529404627469, 60.673270370041017 ], [ -135.02529307945653, 60.673273345601366 ], [ -135.0251510399346, 60.673552113859287 ], [ -135.02514920093716, 60.673554645022101 ], [ -135.02492796919509, 60.673775876764182 ], [ -135.02492543803228, 60.673777715761609 ], [ -135.02464666977437, 60.673919755283528 ], [ -135.02464369421401, 60.673920722101691 ], [ -135.02433467721963, 60.673969665585396 ], [ -135.02433154853034, 60.673969665585396 ], [ -135.02402253153596, 60.673920722101691 ], [ -135.0240195559756, 60.673919755283528 ], [ -135.02374078771768, 60.673777715761609 ], [ -135.02373825655488, 60.673775876764182 ], [ -135.0235170248128, 60.673554645022101 ], [ -135.02351518581537, 60.673552113859287 ], [ -135.02337314629344, 60.673273345601366 ], [ -135.02337217947527, 60.673270370041017 ], [ -135.02332323599157, 60.672961353046645 ] ] ] } }
        ]
        };
  var data_points = {
        "type": "FeatureCollection",
        "name": "test-points-short-named",
        "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
        "features": [
        { "type": "Feature", "properties": { "name": "some thing"}, "geometry": { "type": "Point", "coordinates": [ -135.024939373899997, 60.672798081069011 ] } },
        { "type": "Feature", "properties": { "name": "some thing"}, "geometry": { "type": "Point", "coordinates": [ -135.024939373899997, 60.672825032341493 ] } },
        { "type": "Feature", "properties": { "name": "some thing"}, "geometry": { "type": "Point", "coordinates": [ -135.024939373899997, 60.672851983614009 ] } },
        { "type": "Feature", "properties": { "name": "some thing"}, "geometry": { "type": "Point", "coordinates": [ -135.024939373899997, 60.672878934886 ] } },
        { "type": "Feature", "properties": { "name": "some thing"}, "geometry": { "type": "Point", "coordinates": [ -135.024939373899997, 60.672663324709006 ] } },
        { "type": "Feature", "properties": { "name": "some thing"}, "geometry": { "type": "Point", "coordinates": [ -135.024939373899997, 60.672690275980997 ] } },
        { "type": "Feature", "properties": { "name": "some thing"}, "geometry": { "type": "Point", "coordinates": [ -135.024939373899997, 60.67271722725301 ] } },
        { "type": "Feature", "properties": { "name": "some thing"}, "geometry": { "type": "Point", "coordinates": [ -135.024884259259977, 60.672771129797013 ] } },
        { "type": "Feature", "properties": { "name": "some thing"}, "geometry": { "type": "Point", "coordinates": [ -135.024884259259977, 60.672798081068997 ] } },
        { "type": "Feature", "properties": { "name": "some thing"}, "geometry": { "type": "Point", "coordinates": [ -135.024333112874984, 60.672878934885993 ] } },
        { "type": "Feature", "properties": { "name": "some thing"}, "geometry": { "type": "Point", "coordinates": [ -135.024333112874984, 60.672905886157999 ] } },
        { "type": "Feature", "properties": { "name": "some thing"}, "geometry": { "type": "Point", "coordinates": [ -135.024333112874984, 60.67293283742999 ] } },
        { "type": "Feature", "properties": { "name": "some thing"}, "geometry": { "type": "Point", "coordinates": [ -135.024333112874984, 60.672959788701995 ] } }
        ]
        };
      
  // console.log(data_poly);
  districts.addData(data_points);
  districts.addTo(map);
  
	</script>
</body>
</html>